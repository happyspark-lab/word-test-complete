<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº”å¹´çº§å­—è¯ï¼šå“ªå’å°ç¥æ¦œ V12</title>
    <style>
        :root {
            --primary: #ff3300; --secondary: #ffcc00; --dark: #220a0a;
            --light: #fff5e6; --correct: #00e676; --wrong: #ff1744;
        }
        body {
            margin: 0; padding: 0; font-family: 'KaiTi', 'æ¥·ä½“', serif;
            background-color: var(--dark);
            background-image: radial-gradient(circle at 50% 50%, rgba(255, 51, 0, 0.2) 0%, transparent 80%);
            color: var(--light); min-height: 100vh; display: flex; justify-content: center; align-items: center;
        }
        .game-card {
            background: rgba(30, 10, 10, 0.95); border: 5px solid var(--secondary); border-radius: 25px;
            padding: 30px; box-shadow: 0 0 50px rgba(255, 51, 0, 0.5); width: 95%; max-width: 750px; text-align: center;
            /* é˜²æ­¢paddingæ’‘å¤§å®¹å™¨ */
            box-sizing: border-box;
        }
        .header { display: flex; justify-content: space-between; font-size: 1.2rem; color: var(--secondary); margin-bottom: 10px; }
        .progress-track { width: 100%; height: 14px; background: #441111; border-radius: 7px; margin-bottom: 25px; overflow: hidden; border: 1px solid var(--primary); }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #ffcc00, #ff3300); width: 0%; transition: width 0.3s; }
        .q-badge { background: var(--primary); display: inline-block; padding: 6px 16px; border-radius: 12px; font-size: 1.1rem; margin-bottom: 15px; color: white; font-weight: bold;}
        
        .q-phrase-container { display: flex; flex-direction: column; align-items: center; gap: 15px; margin: 25px 0; }
        .q-instruction { font-size: 1.6rem; color: #aaa; } 
        /* æ ¸å¿ƒä¼˜åŒ–ï¼šé«˜äº®å­—æ ·å¼ */
        .q-phrase { font-size: 4rem; color: var(--light); text-shadow: 0 0 20px var(--primary); white-space: nowrap; letter-spacing: 5px; }
        .highlight-y { color: #ffcc00; font-weight: bold; font-size: 1.1em; border-bottom: 4px solid #ffcc00; padding-bottom: 5px; text-shadow: 0 0 10px #ff9900; }

        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .option-btn {
            background: rgba(255,255,255,0.05); border: 2px solid #662222; color: var(--light);
            padding: 20px; font-size: 2.2rem; border-radius: 18px; cursor: pointer; transition: 0.2s;
        }
        .option-btn:hover { border-color: var(--secondary); background: rgba(255, 204, 0, 0.1); }
        .option-btn.correct { background: var(--correct) !important; color: #000; font-weight: bold; }
        .option-btn.wrong { background: var(--wrong) !important; }
        
        .feedback-box { display: none; margin-top: 25px; padding: 20px; border: 2px dashed var(--secondary); background: rgba(0,0,0,0.6); text-align: left; }
        .fb-title { font-size: 2rem; font-weight: bold; display: block; margin-bottom: 10px; }
        .fb-text { font-size: 1.6rem; line-height: 1.5; color: #fff; }
        
        .wrong-list { text-align: left; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-top: 20px; max-height: 200px; overflow-y: auto; font-size: 1.2rem; }
        .wrong-item { color: #ff6b6b; margin-bottom: 8px; border-bottom: 1px solid #444; padding-bottom: 4px; }
        
        .action-btn { background: var(--secondary); color: #331111; border: none; padding: 18px 50px; font-size: 1.8rem; border-radius: 40px; cursor: pointer; font-weight: bold; margin-top: 25px; box-shadow: 0 5px 0 #b8860b; }
        .action-btn:active { transform: translateY(4px); box-shadow: none; }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        /* ========================================= */
        /* ğŸ‘‡ æ‰‹æœºç«¯é€‚é…ä»£ç  (å±å¹•å°äº600pxæ—¶ç”Ÿæ•ˆ) ğŸ‘‡ */
        /* ========================================= */
        @media screen and (max-width: 600px) {
            /* 1. å®¹å™¨å˜å¾—æ›´ç´§å‡‘ */
            .game-card { padding: 15px 10px; width: 95%; border-width: 3px; }
            
            /* 2. å¼ºåˆ¶ç¼©å°å¤§æ ‡é¢˜å’Œè¯´æ˜æ–‡å­— (ä½¿ç”¨ !important è¦†ç›–å†…è”æ ·å¼) */
            h1[style] { font-size: 2.4rem !important; margin-bottom: 10px !important; }
            #start-screen p[style] { font-size: 1.2rem !important; margin-bottom: 20px !important; }
            
            /* 3. é¦–é¡µè¯´æ˜æ¡†å­—ä½“ç¼©å° */
            #start-screen div[style*="font-size: 1.4rem"] {
                font-size: 1.1rem !important;
                padding: 15px !important;
                line-height: 1.6 !important;
            }

            /* 4. æ ¸å¿ƒé¢˜ç›®åŒºåŸŸç¼©å° */
            .q-phrase { font-size: 2.8rem; letter-spacing: 2px; }
            .q-instruction { font-size: 1.2rem; }
            .q-phrase-container { margin: 15px 0; gap: 5px; }

            /* 5. é€‰é¡¹æŒ‰é’®è°ƒæ•´ */
            .options-grid { gap: 10px; }
            .option-btn { padding: 15px 5px; font-size: 1.6rem; border-radius: 12px; }

            /* 6. åº•éƒ¨æ“ä½œæŒ‰é’®å…¨å®½ï¼Œæ–¹ä¾¿ç‚¹å‡» */
            .action-btn { 
                width: 100%; 
                padding: 15px 0 !important; 
                font-size: 1.5rem !important; 
                box-sizing: border-box; 
            }
            
            /* 7. åé¦ˆåŒºåŸŸ */
            .feedback-box { padding: 15px; margin-top: 15px; }
            .fb-title { font-size: 1.5rem; }
            .fb-text { font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <div id="game-container" class="game-card">
        <div id="start-screen">
            <h1 style="font-size: 4rem; color: var(--secondary); margin-bottom: 5px; text-shadow: 2px 2px 5px #000;">ğŸ”¥ å“ªå’å°ç¥æ¦œ ğŸ”¥</h1>
            <p style="font-size: 1.6rem; color: #fff; margin-bottom: 30px;">äº”å¹´çº§å­—è¯ Â· å…¨é‡é¢˜åº“ç»ˆæç‰ˆ</p>
            
            <div style="margin: 20px auto; max-width: 550px; font-size: 1.4rem; text-align: left; background: rgba(255,255,255,0.05); padding: 25px; border-radius: 18px; border: 1px solid rgba(255,204,0,0.3);">
                <p>ğŸ¯ <b>è‹±é›„ä»»åŠ¡</b>ï¼šä»ç™¾é“é¢˜åº“ä¸­éšæœºæŠ½å– 20 å…³è¿›è¡Œè¯•ç‚¼ã€‚</p>
                <p>âš ï¸ <b>æ³¨æ„ç»†èŠ‚</b>ï¼šè¯·é‡ç‚¹å…³æ³¨<span style="color:#ffcc00; font-weight:bold;">é‡‘è‰²é«˜äº®</span>çš„å­—è¯ã€‚</p>
                <p>ğŸ† <b>é€šå…³å¥–åŠ±</b>ï¼šç”Ÿæˆä¸“å±â€œé”™é¢˜å·è½´â€ï¼ŒåŠ©ä½ æ³•åŠ›å¤§å¢ã€‚</p>
            </div>
            
            <button class="action-btn" style="font-size: 2rem; padding: 20px 60px; animation: pulse 2s infinite;" onclick="startGame()">è¸ä¸Šå°ç¥ä¹‹è·¯</button>
        </div>

        <div id="game-screen" style="display: none;">
            <div class="header"><span id="score-display">åŠŸå¾·ç‚¹: 0</span><span id="count-display">è¿›åº¦: 1/20</span></div>
            <div class="progress-track"><div class="progress-fill" id="progress-bar"></div></div>
            <div id="q-type" class="q-badge"></div>
            <div class="q-phrase-container" id="q-main-display"></div>
            <div class="options-grid" id="options-grid"></div>
            <div class="feedback-box" id="feedback-box"><span id="fb-title" class="fb-title"></span><p id="fb-text" class="fb-text"></p></div>
            <button id="next-btn" class="action-btn" style="display:none" onclick="nextQuestion()">æ–©ä¸‹ä¸ªå¦–å­½ â”</button>
        </div>

        <div id="result-screen" style="display: none;">
            <h1 style="font-size: 3.5rem; color: var(--secondary);">è¯•ç‚¼ç»“æŸï¼</h1>
            <div id="final-score" style="font-size: 5rem; margin: 10px 0; color: var(--secondary);">0</div>
            
            <div id="wrong-record-box">
                <p style="text-align:left; color:var(--secondary); font-size: 1.4rem;">ğŸ“œ è‹±é›„å·è½´ï¼ˆé”™é¢˜å¤ç›˜ï¼‰ï¼š</p>
                <div class="wrong-list" id="wrong-list"></div>
            </div>
            
            <button class="action-btn" onclick="location.reload()">å†æ¬¡ä¿®ç‚¼</button>
        </div>
    </div>

<script>
    const AudioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playSound(freq, type, duration) {
        // å¢åŠ å®‰å…¨æ£€æŸ¥ï¼Œé˜²æ­¢AudioCtxæœªå°±ç»ªæŠ¥é”™
        if(AudioCtx.state === 'suspended') {
             try { AudioCtx.resume(); } catch(e){}
        }
        const osc = AudioCtx.createOscillator();
        const gain = AudioCtx.createGain();
        osc.type = type; osc.frequency.value = freq;
        gain.gain.setValueAtTime(0.1, AudioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, AudioCtx.currentTime + duration);
        osc.connect(gain); gain.connect(AudioCtx.destination);
        osc.start(); osc.stop(AudioCtx.currentTime + duration);
    }

    // --- å…¨é‡é¢˜åº“ (æ¶µç›–100+æ ¸å¿ƒè€ƒç‚¹) ---
    const DB = [
        // æ˜“è¯»é”™å­— (Highlight the specific character)
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"ç™½<span class='highlight-y'>é¹­</span>", opts:["lÃ¹", "lÃ²u"], ans:"lÃ¹", why:"é¹­(lÃ¹)é¸Ÿï¼Œä¸è¯»lÃ²uã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>é»›</span>é’", opts:["dÃ i", "hÄ“i"], ans:"dÃ i", why:"é»›(dÃ i)è‰²ï¼Œä¸è¯»hÄ“iã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"é•¶<span class='highlight-y'>åµŒ</span>", opts:["qiÃ n", "kÃ n"], ans:"qiÃ n", why:"åµŒ(qiÃ n)å…¥ï¼Œä¸è¯»kÃ nã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>ç¿¡</span>ç¿ ", opts:["fÄ›i", "fÄ“i"], ans:"fÄ›i", why:"ç¿¡(fÄ›i)è¯»ä¸‰å£°ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ¹›</span>è“", opts:["zhÃ n", "chÃ©n"], ans:"zhÃ n", why:"æ¹›(zhÃ n)è“ï¼Œä¸è¯»chÃ©nã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ¸²</span>æŸ“", opts:["xuÃ n", "xuÄn"], ans:"xuÃ n", why:"æ¸²(xuÃ n)æŸ“æ˜¯å››å£°ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"å‹¾<span class='highlight-y'>å‹’</span>", opts:["lÃ¨", "lÄ“i"], ans:"lÃ¨", why:"å‹¾å‹’(lÃ¨)ï¼Œä¸è¯»lÄ“iã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>è‡€</span>éƒ¨", opts:["tÃºn", "diÃ n"], ans:"tÃºn", why:"è‡€(tÃºn)éƒ¨ï¼Œä¸è¯»diÃ nã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"èœ¿<span class='highlight-y'>èœ’</span>", opts:["yÃ¡n", "wÇn"], ans:"yÃ¡n", why:"èœ’(yÃ¡n)ä¸è¯»wÇnã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"åŒ€<span class='highlight-y'>ç§°</span>", opts:["chÃ¨n", "chÄ“ng"], ans:"chÃ¨n", why:"åŒ€ç§°(chÃ¨n)è¯»å››å£°ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"å’€<span class='highlight-y'>åš¼</span>", opts:["juÃ©", "jiÃ¡o"], ans:"juÃ©", why:"ä¹¦é¢è¯­è¯»juÃ©ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>çƒ™</span>å°", opts:["lÃ o", "luÃ²"], ans:"lÃ o", why:"çƒ™(lÃ o)å°ï¼Œä¸è¯»luÃ²ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"ç²—<span class='highlight-y'>ç³™</span>", opts:["cÄo", "zÃ o"], ans:"cÄo", why:"ç³™(cÄo)æ˜¯ä¸€å£°ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ”¥</span>ç€", opts:["zuÃ n", "zhuÃ n"], ans:"zuÃ n", why:"æ”¥(zuÃ n)ä¸è¯»zhuÃ nã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>çªˆ</span>çª•", opts:["yÇo", "wÄ"], ans:"yÇo", why:"çªˆ(yÇo)ä¸è¯»wÄã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ©</span>æ²¹", opts:["kÄi", "jiÄ“"], ans:"kÄi", why:"æ©(kÄi)æ„ä¸ºæ“¦ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"æ¾<span class='highlight-y'>æ¹ƒ</span>", opts:["pÃ i", "bÃ i"], ans:"pÃ i", why:"æ¹ƒ(pÃ i)ä¸è¯»bÃ iã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>è¸±</span>æ­¥", opts:["duÃ³", "dÃ¹"], ans:"duÃ³", why:"è¸±(duÃ³)ä¸è¯»dÃ¹ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ†”</span>æ‚´", opts:["qiÃ¡o", "jiÄo"], ans:"qiÃ¡o", why:"æ†”(qiÃ¡o)ä¸è¯»jiÄoã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"æ‰<span class='highlight-y'>æ“</span>", opts:["cuÅ", "cuÃ²"], ans:"cuÅ", why:"æ“(cuÅ)æ˜¯ä¸€å£°ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"æ®‹<span class='highlight-y'>ç¾¹</span>", opts:["gÄ“ng", "jÄ«ng"], ans:"gÄ“ng", why:"ç¾¹(gÄ“ng)ä¸è¯»jÄ«ngã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>éœ</span>æ—¶", opts:["shÃ ", "shÄ"], ans:"shÃ ", why:"éœ(shÃ )æ˜¯å››å£°ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>å•œ</span>æ³£", opts:["chuÃ²", "chuÃ i"], ans:"chuÃ²", why:"å•œ(chuÃ²)ä¸è¯»chuÃ iã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"çƒŸ<span class='highlight-y'>å›±</span>", opts:["cÅng", "tÇ’ng"], ans:"cÅng", why:"å›±(cÅng)ä¸è¯»tÇ’ngã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"ä½<span class='highlight-y'>å»</span>", opts:["lÃ³u", "lÇš"], ans:"lÃ³u", why:"å»(lÃ³u)ä¸è¯»lÇšã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ’</span>å˜´", opts:["chÄ", "cÄ"], ans:"chÄ", why:"æ’(chÄ)æ˜¯ç¿˜èˆŒéŸ³ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ‹½</span>ä½", opts:["zhuÃ i", "yÃ¨"], ans:"zhuÃ i", why:"æ‹½(zhuÃ i)ä¸è¯»yÃ¨ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æº</span>å’Œ", opts:["chÄn", "cÃ n"], ans:"chÄn", why:"æº(chÄn)ä¸è¯»cÃ nã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"æ<span class='highlight-y'>å“</span>", opts:["hÃ¨", "xiÃ "], ans:"hÃ¨", why:"å“(hÃ¨)ä¸è¯»xiÃ ã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>è¸®</span>èµ·", opts:["diÇn", "tiÄn"], ans:"diÇn", why:"è¸®(diÇn)ä¸è¯»tiÄnã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"æ‰§<span class='highlight-y'>æ‹—</span>", opts:["niÃ¹", "Ã o"], ans:"niÃ¹", why:"æ‹—(niÃ¹)ä¸è¯»Ã oã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"å€”<span class='highlight-y'>å¼º</span>", opts:["jiÃ ng", "qiÃ¡ng"], ans:"jiÃ ng", why:"å¼º(jiÃ ng)ä¸è¯»qiÃ¡ngã€‚" },
        { t:"æ­£éŸ³è¯•ç‚¼", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>é¾‡</span>ç‰™", opts:["zÄ«", "cÄ«"], ans:"zÄ«", why:"é¾‡(zÄ«)ä¸è¯»cÄ«ã€‚" },

        // å¤šéŸ³å­— (Highlight context char)
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"ä¸€å“„è€Œ<span class='highlight-y'>æ•£</span>", opts:["sÃ n", "sÇn"], ans:"sÃ n", why:"è§£æ•£è¯»sÃ nï¼›æ¾æ•£è¯»sÇnã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>é²œ</span>ä¸ºäººçŸ¥", opts:["xiÇn", "xiÄn"], ans:"xiÇn", why:"æ–°é²œè¯»xiÄnï¼›å°‘è§è¯»xiÇnã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"ç‰©å“<span class='highlight-y'>ä¾¿</span>å®œ", opts:["piÃ¡n", "biÃ n"], ans:"piÃ¡n", why:"æ–¹ä¾¿è¯»biÃ nï¼›ä¾¿å®œè¯»piÃ¡nã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æŒ¨</span>è¿‘çª—æˆ·", opts:["Äi", "Ã¡i"], ans:"Äi", why:"é è¿‘è¯»Äiï¼›æŒ¨æ‰“è¯»Ã¡iã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"å‹‡å¤º<span class='highlight-y'>å† </span>å†›", opts:["guÃ n", "guÄn"], ans:"guÃ n", why:"æ¡‚å† è¯»guÄnï¼›ç¬¬ä¸€åè¯»guÃ nã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"æ·¹<span class='highlight-y'>æ²¡</span>å†œç”°", opts:["mÃ²", "mÃ©i"], ans:"mÃ²", why:"æ²¡æœ‰è¯»mÃ©iï¼›æ²‰æ²¡è¯»mÃ²ã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"å‰¥<span class='highlight-y'>å‰Š</span>ç™¾å§“", opts:["xuÄ“", "xiÄo"], ans:"xuÄ“", why:"å‰¥å‰Šè¯»xuÄ“ï¼›å‰Šçš®è¯»xiÄoã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"è›®<span class='highlight-y'>æ¨ª</span>æ— ç†", opts:["hÃ¨ng", "hÃ©ng"], ans:"hÃ¨ng", why:"æ¨ªç«–è¯»hÃ©ngï¼›å¼ºæ¨ªè¯»hÃ¨ngã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>éœ²</span>é¦…å„¿äº†", opts:["lÃ²u", "lÃ¹"], ans:"lÃ²u", why:"éœ²ç è¯»lÃ¹ï¼›æ˜¾éœ²å½¢è¿¹è¯»lÃ²uã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"åœŸåœ°<span class='highlight-y'>é¾Ÿ</span>è£‚", opts:["jÅ«n", "guÄ«"], ans:"jÅ«n", why:"ä¹Œé¾Ÿè¯»guÄ«ï¼›è£‚å¼€è¯»jÅ«nã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"è„¸è›‹çº¢<span class='highlight-y'>æ™•</span>", opts:["yÃ¹n", "yÅ«n"], ans:"yÃ¹n", why:"å¤´æ™•è¯»yÅ«nï¼›è‰²å½©è¯»yÃ¹nã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"åšé—»å¼º<span class='highlight-y'>è¯†</span>", opts:["zhÃ¬", "shÃ­"], ans:"zhÃ¬", why:"çŸ¥è¯†è¯»shÃ­ï¼›è®°å¿†è¯»zhÃ¬ã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æ‚„</span>ç„¶æ— å£°", opts:["qiÇo", "qiÄo"], ans:"qiÇo", why:"ä¹¦é¢è¯­è¯»qiÇoï¼›æ‚„æ‚„è¯è¯»qiÄoã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"å‚<span class='highlight-y'>å·®</span>ä¸é½", opts:["cÄ«", "chÄ"], ans:"cÄ«", why:"å·®åˆ«è¯»chÄï¼›é•¿çŸ­ä¸ä¸€è¯»cÄ«ã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>ç³»</span>é‹å¸¦", opts:["jÃ¬", "xÃ¬"], ans:"jÃ¬", why:"å…³ç³»è¯»xÃ¬ï¼›æ‰“ç»“è¯»jÃ¬ã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"<span class='highlight-y'>æŒ£</span>æ‰", opts:["zhÄ“ng", "zhÃ¨ng"], ans:"zhÄ“ng", why:"æŒ£æ‰è¯»zhÄ“ngï¼›æŒ£é’±è¯»zhÃ¨ngã€‚" },
        { t:"å¤šéŸ³è¿·é˜µ", inst:"é€‰å‡ºé«˜äº®å­—çš„è¯»éŸ³", phrase:"åœ<span class='highlight-y'>æ³Š</span>", opts:["bÃ³", "pÅ"], ans:"bÃ³", why:"æ¹–æ³Šè¯»pÅï¼›åœèˆ¹è¯»bÃ³ã€‚" },

        // ä¹¦å†™ä¸å½¢è¿‘å­—
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"yÇn jiÇn", opts:["çœ¼ç‘", "çœ¼è„¸"], ans:"çœ¼ç‘", why:"â€˜ç‘â€™å³è¾¹æ˜¯â€˜ä½¥â€™ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"zhÃ ng pÃ©ng", opts:["å¸ç¯·", "è´¦ç¯·"], ans:"å¸ç¯·", why:"å¸ç¯·ç”¨å·¾å­—æ—ï¼Œè´¦æœ¬ç”¨è´å­—æ—ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"kuÃ­ wÃº", opts:["é­æ¢§", "å‚€æ¢§"], ans:"é­æ¢§", why:"â€˜é­â€™å†…éƒ¨æ˜¯â€˜æ–—â€™ï¼Œä¸æ˜¯â€˜é¬¼â€™ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"shÃ ng Ã¨", opts:["ä¸Šè…­", "ä¸Šé¢š"], ans:"ä¸Šè…­", why:"ä¸Šè…­ç”¨æœˆå­—æ—ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"fÃ¡n yÇn", opts:["ç¹è¡", "ç¹è¡Œ"], ans:"ç¹è¡", why:"è¡å­—ä¸­é—´æ˜¯â€˜è¡Œâ€™ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"æˆè¯­è¡¥å…¨", phrase:"å†æ¥å†__", opts:["å‰", "åŠ±"], ans:"å‰", why:"å‰æŒ‡ç£¨åˆ€çŸ³ï¼Œå‰å…µç§£é©¬ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"gÄn zÃ o", opts:["å¹²ç‡¥", "å¹²èº"], ans:"å¹²ç‡¥", why:"ç‡¥çƒ­ç”¨ç«ï¼ŒèºåŠ¨ç”¨è¶³ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"gÃ o qÃ¬ng", opts:["å‘Šç½„", "å‘Šé¦¨"], ans:"å‘Šç½„", why:"ç½„æ˜¯ç¼¶éƒ¨ï¼Œæ„ä¸ºç©ºäº†ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"pÃ¡i fÄng", opts:["ç‰ŒåŠ", "ç‰Œä»¿"], ans:"ç‰ŒåŠ", why:"åŠæ˜¯åœŸå­—æ—ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"biÃ n zi", opts:["è¾«å­", "è¾©å­"], ans:"è¾«å­", why:"è¾«å­ä¸­é—´æ˜¯â€˜ç³»â€™ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"jiÄn yÃ¹", opts:["ç›‘ç‹±", "ç›‘æ¬²"], ans:"ç›‘ç‹±", why:"ç‹±ä¸­é—´æ˜¯â€˜è¨€â€™ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"quÃ¡n suÅ", opts:["èœ·ç¼©", "å€¦ç¼©"], ans:"èœ·ç¼©", why:"èœ·æ˜¯è™«å­—æ—ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"yÇ’u hÄ“i", opts:["é»é»‘", "å¹¼é»‘"], ans:"é»é»‘", why:"é»æ˜¯é»‘å­—æ—ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"huÃ¡ng dÄ“ng", opts:["é»„æ¾„æ¾„", "é»„ç™»ç™»"], ans:"é»„æ¾„æ¾„", why:"æ³¨æ„æ˜¯ä¸‰ç‚¹æ°´çš„â€˜æ¾„â€™ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"é€‰å‡ºæ­£ç¡®å­—å½¢", phrase:"__åˆ«", opts:["è¾¨", "è¾©"], ans:"è¾¨", why:"åˆ†è¾¨ç”¨åˆ€(è¾¨)ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"é€‰å‡ºæ­£ç¡®å­—å½¢", phrase:"äº‰__", opts:["è¾©", "è¾¨"], ans:"è¾©", why:"è¾©è®ºç”¨è¨€(è¾©)ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"é€‰å‡ºæ­£ç¡®å­—å½¢", phrase:"éœ‡__", opts:["æ’¼", "æ„Ÿ"], ans:"æ’¼", why:"éœ‡æ’¼ç”¨æ‰‹(æ’¼)ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"nÃ¬ fÃ¡n", opts:["è…»çƒ¦", "è†©çƒ¦"], ans:"è…»çƒ¦", why:"è…»æ˜¯æœˆå­—æ—ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"zhÄn yÇng", opts:["ç»ä»°", "æªä»°"], ans:"ç»ä»°", why:"ç»æ˜¯ç›®å­—æ—ã€‚" },
        { t:"ç«çœ¼é‡‘ç›", inst:"çœ‹æ‹¼éŸ³é€‰æ±‰å­—", phrase:"miÇo shÃ¬", opts:["è—è§†", "è”‘è§†"], ans:"è—è§†", why:"è—æ˜¯è‰å­—å¤´ã€‚" }
    ];

    let currentPool = []; let idx = 0; let score = 0; let wrongRecords = [];

    function startGame() {
        if (AudioCtx.state === 'suspended') {
            try{ AudioCtx.resume(); } catch(e){}
        }
        // éšæœºæŠ½å–20é¢˜ï¼Œå› ä¸ºåº“å¤Ÿå¤§ï¼Œæ‰€ä»¥ä¸ä¼šé‡å¤
        currentPool = [...DB].sort(() => Math.random() - 0.5).slice(0, 20);
        idx = 0; score = 0; wrongRecords = [];
        
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        showQuestion();
    }

    function showQuestion() {
        const q = currentPool[idx];
        document.getElementById('count-display').innerText = `æ–©å¦–è¿›åº¦: ${idx + 1}/20`;
        document.getElementById('progress-bar').style.width = `${((idx+1) / 20) * 100}%`;
        document.getElementById('score-display').innerText = `åŠŸå¾·ç‚¹: ${score}`;
        document.getElementById('q-type').innerText = q.t;
        
        document.getElementById('q-main-display').innerHTML = `
            <div class="q-instruction">${q.inst}ï¼š</div>
            <div class="q-phrase">${q.phrase}</div>
        `;
        
        const grid = document.getElementById('options-grid'); grid.innerHTML = '';
        let opts = [...q.opts].sort(() => Math.random() - 0.5);
        opts.forEach(opt => {
            const btn = document.createElement('button'); btn.className = 'option-btn';
            btn.innerText = opt; btn.onclick = () => { playSound(600, 'sine', 0.1); check(btn, opt, q); };
            grid.appendChild(btn);
        });
        document.getElementById('feedback-box').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';
    }

    function check(btn, val, q) {
        document.querySelectorAll('.option-btn').forEach(b => b.onclick = null);
        const isCorrect = val === q.ans;
        if (isCorrect) {
            playSound(880, 'triangle', 0.3);
            btn.classList.add('correct'); score += 5;
            document.getElementById('fb-title').innerText = "âœ… ä¸€å‡»å³ä¸­ï¼";
            document.getElementById('fb-title').style.color = "var(--correct)";
        } else {
            playSound(150, 'sawtooth', 0.4);
            btn.classList.add('wrong');
            // å»é™¤é«˜äº®æ ‡ç­¾ï¼Œä»…æ˜¾ç¤ºçº¯æ–‡æœ¬ä¾›è®°å½•
            const pureText = q.phrase.replace(/<[^>]+>/g, '');
            wrongRecords.push({ phrase: pureText, ans: q.ans });
            document.getElementById('fb-title').innerText = "âŒ å¦–å­½å‡¶çŒ›ï¼";
            document.getElementById('fb-title').style.color = "var(--wrong)";
            document.querySelectorAll('.option-btn').forEach(b => { if(b.innerText === q.ans) b.classList.add('correct'); });
        }
        document.getElementById('fb-text').innerText = q.why;
        document.getElementById('feedback-box').style.display = 'block';
        document.getElementById('next-btn').style.display = 'inline-block';
    }

    function nextQuestion() {
        idx++;
        if (idx < currentPool.length) showQuestion();
        else showResult();
    }

    function showResult() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = score;
        const list = document.getElementById('wrong-list');
        if (wrongRecords.length === 0) {
            list.innerHTML = "<p style='color:var(--correct)'>å®Œç¾é€šå…³ï¼ä½ çš„æ³•åŠ›å·²è‡»åŒ–å¢ƒï¼</p>";
        } else {
            list.innerHTML = wrongRecords.map(r => `<div class="wrong-item">${r.phrase} ğŸ‘‰ æ­£ç¡®ï¼š${r.ans}</div>`).join('');
        }
    }
</script>
</body>
</html>